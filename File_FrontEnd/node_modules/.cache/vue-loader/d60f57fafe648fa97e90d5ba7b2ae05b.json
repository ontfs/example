{"remainingRequest":"/Users/ericyang/Desktop/test-demo/file_demo/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ericyang/Desktop/test-demo/file_demo/src/views/Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/ericyang/Desktop/test-demo/file_demo/src/views/Home.vue","mtime":1578649632737},{"path":"/Users/ericyang/Desktop/test-demo/file_demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ericyang/Desktop/test-demo/file_demo/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/ericyang/Desktop/test-demo/file_demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ericyang/Desktop/test-demo/file_demo/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcycKaW1wb3J0IHsgdXBsb2FkZmlsZSB9IGZyb20gJ0AvYXBpL2ZpbGUnCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdXNlck5hbWU6ICcnLAogICAgICBvbnRJZDogJycsCiAgICAgIGZpbGVMaXN0OiBbXSwKICAgICAgbG9jYWxGaWxlOiB7fSwKICAgICAgZm9ybTogewogICAgICAgIHBhc3N3b3JkOiAnJwogICAgICB9LAogICAgICBydWxlczogewogICAgICAgIHBhc3N3b3JkOiBbCiAgICAgICAgICB7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiAnUGxlYXNlIGVudGVyIHBhc3N3b3JkJywKICAgICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBwYXR0ZXJuOiAvXltcU117NiwxMn0kLywKICAgICAgICAgICAgbWluOiA2LAogICAgICAgICAgICBtYXg6IDEyLAogICAgICAgICAgICBtZXNzYWdlOiAnNn4xMiBjaGFyYWN0ZXJzIGluIGxlbmd0aCBhbmQgY2Fubm90IGJlIGVtcHR5IScsCiAgICAgICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnCiAgICAgICAgICB9CiAgICAgICAgXQogICAgICB9LAogICAgICBmaWxlT2JqZWN0OiBudWxsLAogICAgICB0YWJsZURhdGE6IFsKICAgICAgICAvLyB7CiAgICAgICAgLy8gICBmaWxlTmFtZTogJzIwMTYtMDUtMDInLAogICAgICAgIC8vICAgY3JlYXRlVGltZTogJ+eOi+Wwj+iZjicsCiAgICAgICAgLy8gICBmaWxlSGFzaDogJ+S4iua1t+W4guaZrumZgOWMuumHkeaymeaxn+i3ryAxNTE4IOW8hCcKICAgICAgICAvLyB9LAogICAgICAgIC8vIHsKICAgICAgICAvLyAgIGZpbGVOYW1lOiAnMjAxNi0wNS0wNCcsCiAgICAgICAgLy8gICBjcmVhdGVUaW1lOiAn546L5bCP6JmOJywKICAgICAgICAvLyAgIGZpbGVIYXNoOiAn5LiK5rW35biC5pmu6ZmA5Yy66YeR5rKZ5rGf6LevIDE1MTcg5byEJwogICAgICAgIC8vIH0sCiAgICAgICAgLy8gewogICAgICAgIC8vICAgZmlsZU5hbWU6ICcyMDE2LTA1LTAxJywKICAgICAgICAvLyAgIGNyZWF0ZVRpbWU6ICfnjovlsI/omY4nLAogICAgICAgIC8vICAgZmlsZUhhc2g6ICfkuIrmtbfluILmma7pmYDljLrph5HmspnmsZ/ot68gMTUxOSDlvIQnCiAgICAgICAgLy8gfSwKICAgICAgICAvLyB7CiAgICAgICAgLy8gICBmaWxlTmFtZTogJzIwMTYtMDUtMDMnLAogICAgICAgIC8vICAgY3JlYXRlVGltZTogJ+eOi+Wwj+iZjicsCiAgICAgICAgLy8gICBmaWxlSGFzaDogJ+S4iua1t+W4guaZrumZgOWMuumHkeaymeaxn+i3ryAxNTE2IOW8hCcKICAgICAgICAvLyB9CiAgICAgIF0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGxvZ091dCgpIHsKICAgICAgc2Vzc2lvblN0b3JhZ2UuY2xlYXIoKQogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IHBhdGg6ICcvbG9naW4nIH0pCiAgICB9LAogICAgdGVzdCgpIHsKICAgICAgLy8gL2FwaS92MS9kYXRhL3Rlc3QKICAgICAgY29uc29sZS5sb2codXBsb2FkZmlsZSkKICAgICAgLy8gYXhpb3MucG9zdCgKICAgICAgLy8gICAnaHR0cDovLzE5Mi4xNjguMS4xMjk6MTA2NjUvYXBpL3YxL2RhdGEvdGVzdD9pZD0xMTExMTExMScsCiAgICAgIC8vICAge30sCiAgICAgIC8vICAgewogICAgICAvLyAgICAgaGVhZGVyczogewogICAgICAvLyAgICAgICAnQ29udGVudC1UeXBlJzogJ211bHRpcGFydC9mb3JtLWRhdGEnCiAgICAgIC8vICAgICB9CiAgICAgIC8vICAgfQogICAgICAvLyApCiAgICB9LAogICAgaGFuZGxlUmVtb3ZlKGZpbGUsIGZpbGVMaXN0KSB7CiAgICAgIGNvbnNvbGUubG9nKGZpbGUsIGZpbGVMaXN0KQogICAgICB0aGlzLmZpbGVPYmplY3QgPSBudWxsCiAgICB9LAogICAgaGFuZGxlUHJldmlldyhmaWxlKSB7CiAgICAgIGNvbnNvbGUubG9nKGZpbGUpCiAgICB9LAogICAgaGFuZGxlQ2hhbmdlKGZpbGUsIGZpbGVMaXN0KSB7CiAgICAgIGNvbnNvbGUubG9nKGZpbGUpCiAgICAgIC8vIHRoaXMubG9jYWxGaWxlID0gZmlsZS5yYXcKICAgICAgLy8gbGV0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCkKICAgICAgLy8gcmVhZGVyLnJlYWRBc0RhdGFVUkwodGhpcy5sb2NhbEZpbGUpIC8vIOi/memHjOS5n+WPr+S7peebtOaOpeWGmeWPguaVsGV2ZW50LnJhdwoKICAgICAgLy8g6L2s5o2i5oiQ5Yqf5ZCO55qE5pON5L2c77yMcmVhZGVyLnJlc3VsdOWNs+S4uui9rOaNouWQjueahERhdGFVUkwg77yMCiAgICAgIC8vIOWug+S4jemcgOimgeiHquW3seWumuS5ie+8jOS9oOWPr+S7pWNvbnNvbGUubG9nKHJlYWRlci5yZXN1bHQp55yL5LiA5LiLCiAgICAgIC8vIHJlYWRlci5vbmxvYWQgPSAoKSA9PiB7CiAgICAgIC8vICAgY29uc29sZS5sb2cocmVhZGVyLnJlc3VsdCkKICAgICAgLy8gfQogICAgfSwKICAgIGZpbGV1cGxvYWQocGFyYW1zKSB7CiAgICAgIGNvbnNvbGUubG9nKCdwYXJhbXMnLCBwYXJhbXMpCiAgICAgIHRoaXMuZmlsZU9iamVjdCA9IHBhcmFtcy5maWxlCiAgICAgIGNvbnNvbGUubG9nKHRoaXMuZmlsZU9iamVjdCkKICAgICAgbGV0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCkKICAgICAgZm9ybURhdGEuYXBwZW5kKCdmaWxlJywgdGhpcy5maWxlT2JqZWN0KQogICAgICBmb3JtRGF0YS5hcHBlbmQoJ29udElkJywgJzExMTExMTExMTExMScpCgogICAgICBsZXQgZGF0YSA9IGZvcm1EYXRhCiAgICAgIC8vIHVwbG9hZGZpbGUoZGF0YSkKICAgICAgYXhpb3MucG9zdCgnaHR0cDovLzE5Mi4xNjguMS4xMjk6MTA2NjUvYXBpL3YxL2RhdGEvdXBsb2FkJywgZGF0YSwgewogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnbXVsdGlwYXJ0L2Zvcm0tZGF0YScKICAgICAgICB9CiAgICAgIH0pCiAgICB9LAogICAgYmVmb3JlQXZhdGFyVXBsb2FkKGZpbGUpIHsKICAgICAgY29uc3QgaXNMdDJNID0gZmlsZS5zaXplIC8gMTAyNCAvIDEwMjQgPCAyCiAgICAgIGlmICghaXNMdDJNKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcignT25seSBmaWxlcyB3aXRoaW4gMm0gYXJlIGFsbG93ZWQnKQogICAgICB9CiAgICAgIHJldHVybiBpc0x0Mk0KICAgIH0sCiAgICBzdWJtaXRGb3JtKGZvcm1OYW1lKSB7CiAgICAgIHRoaXMuJHJlZnNbZm9ybU5hbWVdLnZhbGlkYXRlKHZhbGlkID0+IHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIGlmICghdGhpcy5maWxlT2JqZWN0KSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCdQbGVhc2Ugc2VsZWN0IGEgZmlsZSEnKQogICAgICAgICAgfQogICAgICAgICAgYWxlcnQoJ3N1Ym1pdCEnKQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zb2xlLmxvZygnZXJyb3Igc3VibWl0ISEnKQogICAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgICAgfQogICAgICB9KQogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMudXNlck5hbWUgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCd1c2VyTmFtZScpCiAgICB0aGlzLm9udElkID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnb250SWQnKQogIH0KfQo="},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"home\">\n    <el-card class=\"home_card accout_header\">\n      <h1>\n        <img src=\"../assets/ontfsb.svg\" alt=\"\" />\n      </h1>\n      <span class=\"account_name\">Account: {{ userName }}</span>\n      <span class=\"account_name\">ONT ID: {{ ontId }}</span>\n      <el-button type=\"text\" @click=\"logOut\">Sign Out</el-button>\n    </el-card>\n    <el-card class=\"home_card\">\n      <div class=\"file_wrap\">\n        <el-form ref=\"form\" :rules=\"rules\" :model=\"form\" label-width=\"180px\">\n          <el-form-item label=\"File encryption code\" prop=\"password\">\n            <el-input type=\"password\" v-model=\"form.password\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"File\">\n            <el-upload\n              class=\"upload-demo\"\n              action\n              :on-change=\"handleChange\"\n              :on-remove=\"handleRemove\"\n              :file-list=\"fileList\"\n              :http-request=\"fileupload\"\n              :limit=\"1\"\n              :before-upload=\"beforeAvatarUpload\"\n            >\n              <el-button size=\"small\" type=\"primary\">Choose</el-button>\n              <div slot=\"tip\" class=\"el-upload__tip\">\n                Good news! You can upload files up to 2 MB at a time.\n              </div>\n            </el-upload>\n          </el-form-item>\n        </el-form>\n        <el-button @click=\"submitForm('form')\" size=\"small\" type=\"primary\"\n          >Upload</el-button\n        >\n      </div>\n    </el-card>\n    <el-card class=\"home_card\">\n      <!--  -->\n\n      <el-table\n        empty-text=\"No Data\"\n        :data=\"tableData\"\n        border\n        style=\"width: 100%\"\n      >\n        <el-table-column prop=\"fileName\" label=\"File Name\" width=\"220\">\n        </el-table-column>\n        <el-table-column prop=\"fileHash\" label=\"File Hash\"> </el-table-column>\n        <el-table-column prop=\"createTime\" label=\"Upload Date\" width=\"220\">\n        </el-table-column>\n        <el-table-column label=\"Ation\" align=\"center\" width=\"140\">\n          <template slot-scope=\"scope\">\n            <el-button type=\"text\" size=\"small\">Download</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n    </el-card>\n    <el-button @click=\"test\">Click</el-button>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios'\nimport { uploadfile } from '@/api/file'\nexport default {\n  data() {\n    return {\n      userName: '',\n      ontId: '',\n      fileList: [],\n      localFile: {},\n      form: {\n        password: ''\n      },\n      rules: {\n        password: [\n          {\n            required: true,\n            message: 'Please enter password',\n            trigger: 'blur'\n          },\n          {\n            pattern: /^[\\S]{6,12}$/,\n            min: 6,\n            max: 12,\n            message: '6~12 characters in length and cannot be empty!',\n            trigger: 'change'\n          }\n        ]\n      },\n      fileObject: null,\n      tableData: [\n        // {\n        //   fileName: '2016-05-02',\n        //   createTime: '王小虎',\n        //   fileHash: '上海市普陀区金沙江路 1518 弄'\n        // },\n        // {\n        //   fileName: '2016-05-04',\n        //   createTime: '王小虎',\n        //   fileHash: '上海市普陀区金沙江路 1517 弄'\n        // },\n        // {\n        //   fileName: '2016-05-01',\n        //   createTime: '王小虎',\n        //   fileHash: '上海市普陀区金沙江路 1519 弄'\n        // },\n        // {\n        //   fileName: '2016-05-03',\n        //   createTime: '王小虎',\n        //   fileHash: '上海市普陀区金沙江路 1516 弄'\n        // }\n      ]\n    }\n  },\n  methods: {\n    logOut() {\n      sessionStorage.clear()\n      this.$router.push({ path: '/login' })\n    },\n    test() {\n      // /api/v1/data/test\n      console.log(uploadfile)\n      // axios.post(\n      //   'http://192.168.1.129:10665/api/v1/data/test?id=11111111',\n      //   {},\n      //   {\n      //     headers: {\n      //       'Content-Type': 'multipart/form-data'\n      //     }\n      //   }\n      // )\n    },\n    handleRemove(file, fileList) {\n      console.log(file, fileList)\n      this.fileObject = null\n    },\n    handlePreview(file) {\n      console.log(file)\n    },\n    handleChange(file, fileList) {\n      console.log(file)\n      // this.localFile = file.raw\n      // let reader = new FileReader()\n      // reader.readAsDataURL(this.localFile) // 这里也可以直接写参数event.raw\n\n      // 转换成功后的操作，reader.result即为转换后的DataURL ，\n      // 它不需要自己定义，你可以console.log(reader.result)看一下\n      // reader.onload = () => {\n      //   console.log(reader.result)\n      // }\n    },\n    fileupload(params) {\n      console.log('params', params)\n      this.fileObject = params.file\n      console.log(this.fileObject)\n      let formData = new FormData()\n      formData.append('file', this.fileObject)\n      formData.append('ontId', '111111111111')\n\n      let data = formData\n      // uploadfile(data)\n      axios.post('http://192.168.1.129:10665/api/v1/data/upload', data, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      })\n    },\n    beforeAvatarUpload(file) {\n      const isLt2M = file.size / 1024 / 1024 < 2\n      if (!isLt2M) {\n        this.$message.error('Only files within 2m are allowed')\n      }\n      return isLt2M\n    },\n    submitForm(formName) {\n      this.$refs[formName].validate(valid => {\n        if (valid) {\n          if (!this.fileObject) {\n            return this.$message.error('Please select a file!')\n          }\n          alert('submit!')\n        } else {\n          console.log('error submit!!')\n          return false\n        }\n      })\n    }\n  },\n  mounted() {\n    this.userName = sessionStorage.getItem('userName')\n    this.ontId = sessionStorage.getItem('ontId')\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.home {\n  max-width: 1440px;\n  margin: 0 auto;\n  width: 100%;\n  height: 1000%;\n  padding: 20px;\n  .home_card {\n    margin-bottom: 20px;\n  }\n  .accout_header {\n    text-align: right;\n    .account_name {\n      margin-right: 50px;\n    }\n  }\n\n  .file_wrap {\n    width: 100%;\n    max-width: 400px;\n    .upload-demo {\n      height: 150px;\n    }\n  }\n}\n/deep/.el-card__body {\n  position: relative;\n  h1 {\n    position: absolute;\n    left: 20px;\n    top: 50%;\n    transform: translateY(-50%);\n    img {\n      width: 100px;\n    }\n  }\n}\n</style>\n"]}]}