{"remainingRequest":"/Users/ericyang/Desktop/test-demo/file_demo/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ericyang/Desktop/test-demo/file_demo/src/views/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/ericyang/Desktop/test-demo/file_demo/src/views/Login.vue","mtime":1578649151600},{"path":"/Users/ericyang/Desktop/test-demo/file_demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ericyang/Desktop/test-demo/file_demo/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/ericyang/Desktop/test-demo/file_demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ericyang/Desktop/test-demo/file_demo/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IExvZ2luIH0gZnJvbSAnQC9hcGkvcm9sZScKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBydWxlRm9ybTogewogICAgICAgIHVzZXJOYW1lOiAnJywKICAgICAgICBwYXNzd29yZDogJycKICAgICAgfSwKICAgICAgcnVsZXM6IHsKICAgICAgICB1c2VyTmFtZTogWwogICAgICAgICAgewogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogJ1BsZWFzZSBlbnRlciBhY2NvdW50IG5hbWUnLAogICAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIHBhdHRlcm46IC9eW1xTXXs0LDEyfSQvLAogICAgICAgICAgICBtaW46IDQsCiAgICAgICAgICAgIG1heDogMTIsCiAgICAgICAgICAgIG1lc3NhZ2U6ICc0fjEyIGNoYXJhY3RlcnMgaW4gbGVuZ3RoIGFuZCBjYW5ub3QgYmUgZW1wdHkhJywKICAgICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScKICAgICAgICAgIH0KICAgICAgICBdLAogICAgICAgIHBhc3N3b3JkOiBbCiAgICAgICAgICB7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiAnUGxlYXNlIGVudGVyIHBhc3N3b3JkJywKICAgICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBwYXR0ZXJuOiAvXltcU117NiwxMn0kLywKICAgICAgICAgICAgbWluOiA2LAogICAgICAgICAgICBtYXg6IDEyLAogICAgICAgICAgICBtZXNzYWdlOiAnNn4xMiBjaGFyYWN0ZXJzIGluIGxlbmd0aCBhbmQgY2Fubm90IGJlIGVtcHR5IScsCiAgICAgICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnCiAgICAgICAgICB9CiAgICAgICAgXQogICAgICB9CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBzdWJtaXRGb3JtKGZvcm1OYW1lKSB7CiAgICAgIHRoaXMuJHJlZnNbZm9ybU5hbWVdLnZhbGlkYXRlKHZhbGlkID0+IHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIHRoaXMudG9Mb2dpbigpCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnJvciBzdWJtaXQhIScpCiAgICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgICB9CiAgICAgIH0pCiAgICB9LAogICAgYXN5bmMgdG9Mb2dpbigpIHsKICAgICAgdHJ5IHsKICAgICAgICBsZXQgYXBpcmVzID0gYXdhaXQgTG9naW4odGhpcy5ydWxlRm9ybSkKICAgICAgICBjb25zdCB7IGRlc2MsIHJlc3VsdCB9ID0gYXBpcmVzCiAgICAgICAgaWYgKGRlc2MgPT09ICdTVUNDRVNTJykgewogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIG1lc3NhZ2U6ICdTaWduIGluIHN1Y2Nlc3MnLAogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgIGNlbnRlcjogdHJ1ZSwKICAgICAgICAgICAgZHVyYXRpb246IDIwMDAKICAgICAgICAgIH0pCiAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCd1c2VyTmFtZScsIHJlc3VsdC51c2VyTmFtZSkKICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ29udElkJywgcmVzdWx0Lm9udElkKQogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBwYXRoOiAnLycgfSkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIG1lc3NhZ2U6IGRlc2MsCiAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsCiAgICAgICAgICAgIGNlbnRlcjogdHJ1ZSwKICAgICAgICAgICAgZHVyYXRpb246IDIwMDAKICAgICAgICAgIH0pCiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgbWVzc2FnZTogJ1NpZ24gaW4gZmFpbCwgcGxlYXNlIHRyeSBhZ2FpbiEnLAogICAgICAgICAgdHlwZTogJ2Vycm9yJywKICAgICAgICAgIGNlbnRlcjogdHJ1ZSwKICAgICAgICAgIGR1cmF0aW9uOiAyMDAwCiAgICAgICAgfSkKICAgICAgfQogICAgfQogIH0KfQo="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"login_layout account_wrap\">\n    <h1>\n      <img src=\"../assets/ontfsb.svg\" alt=\"\" />\n    </h1>\n    <el-card class=\"account_box-card\">\n      <div class=\"tab_change_account\">\n        <span class=\"active\">Sign In</span>\n        /\n        <span @click=\"$router.push({ name: 'RegisterWrap' })\">Sign Up</span>\n      </div>\n      <div class=\"account_form\">\n        <el-form\n          :model=\"ruleForm\"\n          :rules=\"rules\"\n          ref=\"ruleForm\"\n          label-width=\"140px\"\n          class=\"demo-ruleForm\"\n        >\n          <el-form-item label=\"Account Name\" prop=\"userName\">\n            <el-input v-model=\"ruleForm.userName\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"Password\" prop=\"password\">\n            <el-input type=\"password\" v-model=\"ruleForm.password\"></el-input>\n          </el-form-item>\n        </el-form>\n        <div class=\"acc_btn\">\n          <el-button type=\"primary\" @click=\"submitForm('ruleForm')\"\n            >Sign In</el-button\n          >\n        </div>\n      </div>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport { Login } from '@/api/role'\nexport default {\n  data() {\n    return {\n      ruleForm: {\n        userName: '',\n        password: ''\n      },\n      rules: {\n        userName: [\n          {\n            required: true,\n            message: 'Please enter account name',\n            trigger: 'blur'\n          },\n          {\n            pattern: /^[\\S]{4,12}$/,\n            min: 4,\n            max: 12,\n            message: '4~12 characters in length and cannot be empty!',\n            trigger: 'change'\n          }\n        ],\n        password: [\n          {\n            required: true,\n            message: 'Please enter password',\n            trigger: 'blur'\n          },\n          {\n            pattern: /^[\\S]{6,12}$/,\n            min: 6,\n            max: 12,\n            message: '6~12 characters in length and cannot be empty!',\n            trigger: 'change'\n          }\n        ]\n      }\n    }\n  },\n  methods: {\n    submitForm(formName) {\n      this.$refs[formName].validate(valid => {\n        if (valid) {\n          this.toLogin()\n        } else {\n          console.log('error submit!!')\n          return false\n        }\n      })\n    },\n    async toLogin() {\n      try {\n        let apires = await Login(this.ruleForm)\n        const { desc, result } = apires\n        if (desc === 'SUCCESS') {\n          this.$message({\n            message: 'Sign in success',\n            type: 'success',\n            center: true,\n            duration: 2000\n          })\n          sessionStorage.setItem('userName', result.userName)\n          sessionStorage.setItem('ontId', result.ontId)\n          this.$router.push({ path: '/' })\n        } else {\n          this.$message({\n            message: desc,\n            type: 'error',\n            center: true,\n            duration: 2000\n          })\n        }\n      } catch (error) {\n        this.$message({\n          message: 'Sign in fail, please try again!',\n          type: 'error',\n          center: true,\n          duration: 2000\n        })\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.login_layout {\n  position: relative;\n  .h1 {\n    position: absolute;\n    left: 100px;\n    top: 80px;\n  }\n}\n</style>\n"]}]}