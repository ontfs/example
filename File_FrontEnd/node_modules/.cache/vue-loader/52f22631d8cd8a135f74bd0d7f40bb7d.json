{"remainingRequest":"/Users/ericyang/Desktop/test-demo/file_demo/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ericyang/Desktop/test-demo/file_demo/src/views/Home.vue?vue&type=style&index=0&id=fae5bece&lang=less&scoped=true&","dependencies":[{"path":"/Users/ericyang/Desktop/test-demo/file_demo/src/views/Home.vue","mtime":1578649632737},{"path":"/Users/ericyang/Desktop/test-demo/file_demo/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ericyang/Desktop/test-demo/file_demo/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/ericyang/Desktop/test-demo/file_demo/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/ericyang/Desktop/test-demo/file_demo/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ericyang/Desktop/test-demo/file_demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ericyang/Desktop/test-demo/file_demo/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouaG9tZSB7CiAgbWF4LXdpZHRoOiAxNDQwcHg7CiAgbWFyZ2luOiAwIGF1dG87CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiAxMDAwJTsKICBwYWRkaW5nOiAyMHB4OwogIC5ob21lX2NhcmQgewogICAgbWFyZ2luLWJvdHRvbTogMjBweDsKICB9CiAgLmFjY291dF9oZWFkZXIgewogICAgdGV4dC1hbGlnbjogcmlnaHQ7CiAgICAuYWNjb3VudF9uYW1lIHsKICAgICAgbWFyZ2luLXJpZ2h0OiA1MHB4OwogICAgfQogIH0KCiAgLmZpbGVfd3JhcCB7CiAgICB3aWR0aDogMTAwJTsKICAgIG1heC13aWR0aDogNDAwcHg7CiAgICAudXBsb2FkLWRlbW8gewogICAgICBoZWlnaHQ6IDE1MHB4OwogICAgfQogIH0KfQovZGVlcC8uZWwtY2FyZF9fYm9keSB7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIGgxIHsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIGxlZnQ6IDIwcHg7CiAgICB0b3A6IDUwJTsKICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKTsKICAgIGltZyB7CiAgICAgIHdpZHRoOiAxMDBweDsKICAgIH0KICB9Cn0K"},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"home\">\n    <el-card class=\"home_card accout_header\">\n      <h1>\n        <img src=\"../assets/ontfsb.svg\" alt=\"\" />\n      </h1>\n      <span class=\"account_name\">Account: {{ userName }}</span>\n      <span class=\"account_name\">ONT ID: {{ ontId }}</span>\n      <el-button type=\"text\" @click=\"logOut\">Sign Out</el-button>\n    </el-card>\n    <el-card class=\"home_card\">\n      <div class=\"file_wrap\">\n        <el-form ref=\"form\" :rules=\"rules\" :model=\"form\" label-width=\"180px\">\n          <el-form-item label=\"File encryption code\" prop=\"password\">\n            <el-input type=\"password\" v-model=\"form.password\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"File\">\n            <el-upload\n              class=\"upload-demo\"\n              action\n              :on-change=\"handleChange\"\n              :on-remove=\"handleRemove\"\n              :file-list=\"fileList\"\n              :http-request=\"fileupload\"\n              :limit=\"1\"\n              :before-upload=\"beforeAvatarUpload\"\n            >\n              <el-button size=\"small\" type=\"primary\">Choose</el-button>\n              <div slot=\"tip\" class=\"el-upload__tip\">\n                Good news! You can upload files up to 2 MB at a time.\n              </div>\n            </el-upload>\n          </el-form-item>\n        </el-form>\n        <el-button @click=\"submitForm('form')\" size=\"small\" type=\"primary\"\n          >Upload</el-button\n        >\n      </div>\n    </el-card>\n    <el-card class=\"home_card\">\n      <!--  -->\n\n      <el-table\n        empty-text=\"No Data\"\n        :data=\"tableData\"\n        border\n        style=\"width: 100%\"\n      >\n        <el-table-column prop=\"fileName\" label=\"File Name\" width=\"220\">\n        </el-table-column>\n        <el-table-column prop=\"fileHash\" label=\"File Hash\"> </el-table-column>\n        <el-table-column prop=\"createTime\" label=\"Upload Date\" width=\"220\">\n        </el-table-column>\n        <el-table-column label=\"Ation\" align=\"center\" width=\"140\">\n          <template slot-scope=\"scope\">\n            <el-button type=\"text\" size=\"small\">Download</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n    </el-card>\n    <el-button @click=\"test\">Click</el-button>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios'\nimport { uploadfile } from '@/api/file'\nexport default {\n  data() {\n    return {\n      userName: '',\n      ontId: '',\n      fileList: [],\n      localFile: {},\n      form: {\n        password: ''\n      },\n      rules: {\n        password: [\n          {\n            required: true,\n            message: 'Please enter password',\n            trigger: 'blur'\n          },\n          {\n            pattern: /^[\\S]{6,12}$/,\n            min: 6,\n            max: 12,\n            message: '6~12 characters in length and cannot be empty!',\n            trigger: 'change'\n          }\n        ]\n      },\n      fileObject: null,\n      tableData: [\n        // {\n        //   fileName: '2016-05-02',\n        //   createTime: '王小虎',\n        //   fileHash: '上海市普陀区金沙江路 1518 弄'\n        // },\n        // {\n        //   fileName: '2016-05-04',\n        //   createTime: '王小虎',\n        //   fileHash: '上海市普陀区金沙江路 1517 弄'\n        // },\n        // {\n        //   fileName: '2016-05-01',\n        //   createTime: '王小虎',\n        //   fileHash: '上海市普陀区金沙江路 1519 弄'\n        // },\n        // {\n        //   fileName: '2016-05-03',\n        //   createTime: '王小虎',\n        //   fileHash: '上海市普陀区金沙江路 1516 弄'\n        // }\n      ]\n    }\n  },\n  methods: {\n    logOut() {\n      sessionStorage.clear()\n      this.$router.push({ path: '/login' })\n    },\n    test() {\n      // /api/v1/data/test\n      console.log(uploadfile)\n      // axios.post(\n      //   'http://192.168.1.129:10665/api/v1/data/test?id=11111111',\n      //   {},\n      //   {\n      //     headers: {\n      //       'Content-Type': 'multipart/form-data'\n      //     }\n      //   }\n      // )\n    },\n    handleRemove(file, fileList) {\n      console.log(file, fileList)\n      this.fileObject = null\n    },\n    handlePreview(file) {\n      console.log(file)\n    },\n    handleChange(file, fileList) {\n      console.log(file)\n      // this.localFile = file.raw\n      // let reader = new FileReader()\n      // reader.readAsDataURL(this.localFile) // 这里也可以直接写参数event.raw\n\n      // 转换成功后的操作，reader.result即为转换后的DataURL ，\n      // 它不需要自己定义，你可以console.log(reader.result)看一下\n      // reader.onload = () => {\n      //   console.log(reader.result)\n      // }\n    },\n    fileupload(params) {\n      console.log('params', params)\n      this.fileObject = params.file\n      console.log(this.fileObject)\n      let formData = new FormData()\n      formData.append('file', this.fileObject)\n      formData.append('ontId', '111111111111')\n\n      let data = formData\n      // uploadfile(data)\n      axios.post('http://192.168.1.129:10665/api/v1/data/upload', data, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      })\n    },\n    beforeAvatarUpload(file) {\n      const isLt2M = file.size / 1024 / 1024 < 2\n      if (!isLt2M) {\n        this.$message.error('Only files within 2m are allowed')\n      }\n      return isLt2M\n    },\n    submitForm(formName) {\n      this.$refs[formName].validate(valid => {\n        if (valid) {\n          if (!this.fileObject) {\n            return this.$message.error('Please select a file!')\n          }\n          alert('submit!')\n        } else {\n          console.log('error submit!!')\n          return false\n        }\n      })\n    }\n  },\n  mounted() {\n    this.userName = sessionStorage.getItem('userName')\n    this.ontId = sessionStorage.getItem('ontId')\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.home {\n  max-width: 1440px;\n  margin: 0 auto;\n  width: 100%;\n  height: 1000%;\n  padding: 20px;\n  .home_card {\n    margin-bottom: 20px;\n  }\n  .accout_header {\n    text-align: right;\n    .account_name {\n      margin-right: 50px;\n    }\n  }\n\n  .file_wrap {\n    width: 100%;\n    max-width: 400px;\n    .upload-demo {\n      height: 150px;\n    }\n  }\n}\n/deep/.el-card__body {\n  position: relative;\n  h1 {\n    position: absolute;\n    left: 20px;\n    top: 50%;\n    transform: translateY(-50%);\n    img {\n      width: 100px;\n    }\n  }\n}\n</style>\n"]}]}